intchan10 cc;
intchan10 dd;
 
void factorial(intchan d, intchan c){ 
   int j, n, z;
   while (true) {  // Wie waers mit ewigem Leben?
      z = <? d;    // Womit soll ich rechnen?
      n=1;
      for (j = z ; j > 0 ; j--){
         n= n*j; 
      }     
   c <! n; // Ich sende, was rauskommt.
   }       // Und fange wieder von vorne an.
}

mainAgent{
   int j;
   agent[4] a = {
   		start factorial(dd, cc),
   		start factorial(dd, cc),
   		start factorial(dd, cc),
   		start factorial(dd, cc)
   };
   for (j=1; j<=8 ; j++){
       dd <! j;                             // Hier gibt's Arbeit.
   }                                        // Jetzt ham alle viel zu tun.
   for (j=1; j<=8 ; j++){
       int res = <? cc;                         // Hier sammel ich die Ergebnisse ein.
       println("Die Fakultaet von " + j + " ist " + res + "."); 
   }  
}


